// Generated by CoffeeScript 1.6.2
jQuery(function() {
  var input_field, lines, render_retval, submit_for_eval, terminal;

  terminal = $('.terminal');
  input_field = $('#input-val');
  lines = $('.lines');
  terminal.height($(window).height());
  render_retval = function(data) {
    var outval;

    lines.append($("<div class='line'><span class='caret f'>>></span><span class='inval'>" + data.inval + "</span></div>"));
    outval = 'error' in data ? data.error : data.outval;
    lines.append($("<div class='line'><span class='outval'>" + outval + "</span></div>"));
    return terminal.scrollTop(terminal[0].scrollHeight);
  };
  submit_for_eval = function(str) {
    return $.post('/eval_string/', {
      string: str
    }, render_retval);
  };
  return $('#input-val').bind('keypress', function(e) {
    if (e.keyCode === 13) {
      submit_for_eval(input_field.val());
      input_field.val('');
      return input_field.focus();
    }
  });
});
